let listaRestaurantes=document.getElementById("listaRestaurantes"),contedorLista=document.getElementById("contedorLista"),seleccionado=!1,counter=localStorage.getItem("counter")?parseInt(localStorage.getItem("counter")):0;const arrayDeMarcadores=[];"geolocation"in navigator&&navigator.geolocation.getCurrentPosition((function(e){const t=L.map("mapa").setView([42.78493742707595,-7.727758789062501],8);function a(e){e.preventDefault();let a=document.createElement("li");a.classList.add("m-1"),a.id=`marcador${counter}`,a.innerHTML=`<b>Nombre: </b>${e.currentTarget.firstElementChild.value} - <b>Género: </b>${e.currentTarget.children[1].value}`,a.style.backgroundImage="linear-gradient(to right, lightblue, white, lightblue)",a.style.cursor="pointer",listaRestaurantes.prepend(a);let o=document.createElement("button");o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash-fill" viewBox="0 0 16 16"><path d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"/></svg>',o.classList.add("btn","btn-danger","ms-4"),o.addEventListener("click",r),a.append(o);const{latitude:l,longitude:c}=JSON.parse(localStorage.getItem(`marcador${counter}`));n(l,c).then((function(e){let t=document.createElement("div");t.classList.add("row","text-center");let[r,n]=e,o=document.createElement("p");o.textContent=`${n.split("T")[0]}  ${n.split("T")[1]} h`,o.classList.add("col-6","h5");let l=document.createElement("p");l.textContent=`${r} ºC`,l.classList.add("col-6","h5"),t.append(o),t.append(l),a.append(t)}));const s=L.marker([l,c]);s.addTo(t),s.bindPopup(`<b>Nombre: </b>${e.currentTarget.firstElementChild.value}\n<b>Género: </b>${e.currentTarget.children[1].value}`).openPopup(),localStorage.setItem(`marcador${counter}`,JSON.stringify({latitude:l,longitude:c,desc:`<b>Nombre: </b>${e.currentTarget.firstElementChild.value} - <b>Género: </b>${e.currentTarget.children[1].value}`})),arrayDeMarcadores.push(s),e.currentTarget.remove(),seleccionado=!1}function r(e){if("BUTTON"===e.currentTarget.tagName){let t=e.target.closest("li"),a=arrayDeMarcadores[parseInt(t.id.substr(t.id.length-1))-1];console.log(arrayDeMarcadores),arrayDeMarcadores[parseInt(t.id.substr(t.id.length-1))-1]=null,a.remove(),t.remove(),localStorage.setItem(t.id,""),console.log(arrayDeMarcadores)}}async function n(e,t){let a,r=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${e}&longitude=${t}&hourly=temperature_2m&current_weather=true&timezone=Europe%2FLondon&start_date=2023-02-02&end_date=2023-02-02`);return!!r.ok&&(a=await r.json(),[a.current_weather.temperature,a.current_weather.time])}L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}).addTo(t),function(){for(chave of Object.keys(localStorage).sort())if("IsThisFirstTime_Log_From_LiveServer"!==chave&&"counter"!==chave)if(""!==localStorage.getItem(chave)){const{latitude:e,longitude:a,desc:o}=JSON.parse(localStorage.getItem(chave));let l=document.createElement("li");l.classList.add("m-1"),l.id=chave,l.innerHTML=o,l.style.cursor="pointer",l.style.backgroundImage="linear-gradient(to right, lightblue, white, lightblue)",listaRestaurantes.prepend(l);let c=document.createElement("button");c.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash-fill" viewBox="0 0 16 16"><path d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"/></svg>',c.classList.add("btn","btn-danger","ms-5"),c.addEventListener("click",r),l.append(c),n(e,a).then((function(e){let t=document.createElement("div");t.classList.add("row","text-center");let[a,r]=e,n=document.createElement("p");n.textContent=`${r.split("T")[0]}  ${r.split("T")[1]} h`,n.classList.add("col-6","h5");let o=document.createElement("p");o.textContent=`${a} ºC`,o.classList.add("col-6","h5"),t.append(n),t.append(o),l.append(t)}));const s=L.marker([e,a]);s.addTo(t),s.bindPopup(o).openPopup(),arrayDeMarcadores.push(s)}else arrayDeMarcadores.push(null)}(),t.on("click",(function(e){let t=e.latlng.lat,r=e.latlng.lng;if(!seleccionado){let e=document.createElement("form");e.action="",e.method="POST",e.addEventListener("submit",a);let n=document.createElement("input");n.type="text",n.placeholder="Nombre",n.classList.add(["col-5","form-control"]);let o=document.createElement("input");o.type="text",o.placeholder="Género",o.classList.add(["col-5","form-control"]);let l=document.createElement("button");l.type="submit",l.hidden=!0,e.append(n),e.append(o),e.append(l),contedorLista.append(e),seleccionado=!0,n.focus(),counter++,localStorage.setItem("counter",counter),localStorage.setItem(`marcador${counter}`,JSON.stringify({latitude:t,longitude:r}))}})),listaRestaurantes.addEventListener("click",(function(e){if("BUTTON"!==e.target.tagName&&"svg"!==e.target.tagName&&"path"!==e.target.tagName){let a=e.target.closest("li");const{latitude:r,longitude:n}=JSON.parse(localStorage.getItem(a.id));t.closePopup(),t.flyTo([r,n],17),arrayDeMarcadores[parseInt(a.id.substr(a.id.length-1))-1].openPopup()}}))}));
//# sourceMappingURL=index.38ed0512.js.map
